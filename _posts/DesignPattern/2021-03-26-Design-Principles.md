---
layout: single
title:  "7 Design Principles"
date:   2021-03-26 00:47:10 +0800
toc: true
tags:
  - design-pattern
  - Backend
---

# 设计模式中常用的7大设计原则

如何写出高质量的代码呢？

通常我们在code review时，评判一段代码的是否是好代码的维度非常多，
例如，是否有code smell，是否易维护、可读、可扩展、可复用，是否灵活性高，是否可测等。

在OO设计中，有一些常见的设计原则可以帮助指导我们尽量写出优秀的代码， 
例如 SOLID原则，DRY原则, KISS原则等等。

本文会简单介绍7个在设计模式中常见的设计原则：

- [SRP-单一职责原则](#srp-单一职责原则)
- [OCP-开闭原则](#ocp-开闭原则)
- [LSP-里式替换原则](#lsp-里式替换原则)
- [ISP-接口隔离原则](#isp-接口隔离原则)
- [DIP-依赖倒置原则](#dip-依赖倒置原则)
- [LOD-迪米特法则](#lod-迪米特法则)
- [CRP-合成复用原则](#crp-合成复用原则)

## SRP-单一职责原则
### Definition
单一职责原则(Single Responsibility Principle，SRP)又称单一功能原则，
由 Uncle Bob(Robert C. Martin)于《敏捷软件开发：原则、模式和实践》一书中提出的。  
这里的职责是指类变化的原因，单一职责原则规定一个类应该有且仅有一个引起它变化的原因，否则类应该被拆分(There should never be more than one reason for a class to change)。

### Gist
1. 如何理解单一职责原则（SRP）？
> 一个类只负责完成一个职责或者功能。不要设计大而全的类，要设计粒度小、功能单一的类。  
> SRP是为了实现代码高内聚、低耦合，提高代码的复用性、可读性、可维护性。  
> SRP不仅适用于module、class中，还适用于function、file中

2. 如何判断类的职责是否足够单一？
> 不同的应用场景、不同阶段的需求背景、不同的业务层面，对同一个类的职责是否单一，可能会有不同的判定结果。  
> 实际上，一些侧面的判断指标更具有指导意义和可执行性，比如，出现下面这些情况就有可能说明这类的设计不满足SRP：
- 类中的代码行数、函数或属性过多，会影响代码的可读性和可维护性，我们就需要考虑对类进行拆分；
- 类依赖的其他类过多，或者依赖类的其他类过多，不符合高内聚、低耦合的设计思想，我们就需要考虑对类进行拆分；
- 私有方法过多，我们就要考虑能否将私有方法独立到新的类中，设置为 public 方法，供更多的类使用，从而提高代码的复用性；
- 比较难给类起一个合适名字，很难用一个业务名词概括，或者只能用一些笼统的 Manager、Context 之类的词语来命名，这就说明类的职责定义得可能不够清晰；
- 类中大量的方法都是集中操作类中的某几个属性，考虑是否可以将这几个属性和对应的方法拆分到新的类中。

3. 类的职责是否设计得越单一越好？
> 单一职责原则通过避免设计大而全的类，避免将不相关的功能耦合在一起，来提高类的内聚性。  
> 同时，类职责单一，类依赖的和被依赖的其他类也会变少，减少了代码的耦合性，以此来实现代码的高内聚、低耦合。  
> 但是，如果拆分得过细，实际上会适得其反，反倒会降低内聚性，也会影响代码的可维护性。

## OCP-开闭原则

## LSP-里式替换原则

## ISP-接口隔离原则

## DIP-依赖倒置原则

## LOD-迪米特法则

## CRP-合成复用原则
